@using Vehicle_Rent.ViewModels.VehicleVM;
@model VehicleReadVM;

<div class="site-section bg-light" >

    <div class="container" style="margin-top:80px;">
        <h3 style="margin-bottom:40px;"><strong>@(Model.CompanyName +" " + Model.ModelName) </strong></h3>
        <div class="row">
            <div class="col-md-12 mb-4">
                <div class="listing d-flex align-items-stretch">
                    <div class="listing-img mr-4" style="width:1000px;">
                        <img src=@Model.Photo alt="Image" height="300px">
                    </div>
                    <div class="listing-contents" style="width:1000px;">
                        <h2>@Model.Name</h2>
                        <div>
                            <p>@Model.Description</p>
                       </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div asp-controller="VehicleCatalogue" class="col-lg-7">
                <h2 class="section-heading"><strong>@ViewBag.Title</strong></h2>
            </div>
        </div>
        <div class="row align-items-center justify-content-center" style="margin-bottom:20px;">
            <div class="col-lg-10">
                <form asp-controller="VehicleCatalogue" asp-action="Vehicle" class="trip-form">
                    <div class="row align-items-center">
                        <div class="mb-3 mb-md-0 col-md-2">
                            <input name="minPrice" type="number" class="form-control" style="font-size: 14px; padding: 10px;" placeholder="↓ Min Price">
                            </input>
                        </div>
                        <div class="mb-3 mb-md-0 col-md-2">
                            <input name="maxPrice" type="number" class="form-control" style="font-size: 14px; padding: 10px;" placeholder="↑ Max Price">
                            </input>
                        </div>
                        <div class="mb-3 mb-md-0 col-md-3">
                            <div class="form-control-wrap">
                                <input name="startDate" type="text" id="cf-4" placeholder="Since" class="form-control datepicker px-3">
                                <span class="icon icon-date_range"></span>
                            </div>
                        </div>
                        <div class="mb-3 mb-md-0 col-md-3">
                            <div class="form-control-wrap">
                                <input name="endDate" type="text" id="cf-4" placeholder="To" class="form-control datepicker px-3">
                                <span class="icon icon-date_range"></span>
                            </div>
                        </div>
                        <div class="mb-3 mb-md-0 col-md-2">
                            <input type="submit" value="Search" class="btn btn-primary btn-block py-3">
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <h3 style="margin-bottom:40px;"><strong>Ratings </strong></h3>
            <div class="row" style="margin-top:60px;">
                @foreach (var vehiclecopy in Model.VehicleCopyReadVMs)
                {
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="listing d-block align-items-stretch">
                    <div class="listing-contents h-100">
                        <div style="display:flex; justify-content:space-between;">
                            <h3>Rental Price: @vehiclecopy.RentalPrice</h3>
                                <h3 style="text-align:right;color:gold;">
                                    @if (vehiclecopy.AverageRating != null)
                                    {
                                        @for (int i = 0; i < vehiclecopy.AverageRating; i++)
                                        {
                                            <span>★</span>
                                        }
                                    }
                                </h3>
                            </div>
                        <div style="display:flex; justify-content:space-between">

                        @if ( vehiclecopy.WasAlreadyRented)
                        {
                        <p>
                            You rented this before
                        </p>
                        }
                        else
                        {
                        <p>

                        </p>      
                        }

                            <p> reviewed @vehiclecopy.RentalItems.Where(ri=>ri.StatusId=="2").ToList().Count times</p>
                        </div>
                        <div>

                            @foreach (var unavailability in vehiclecopy.Unavailabilities)
                            {
                                <p>Unav from @unavailability.startDate.ToString("yyyy-MM-dd") to @unavailability.endDate.ToString("yyyy-MM-dd")</p>
                            }
                        </div>
                        <div class="d-block d-md-flex mb-3 border-bottom pb-3">
                            <div class="listing-feature pr-4">
                                <span class="caption">Year:</span>
                                <span class="number">@vehiclecopy.Year</span>
                            </div>
                            <div class="listing-feature pr-4">
                                <span class="caption">Mileage:</span>
                                <span class="number">@vehiclecopy.Mileage</span>
                            </div>
                        </div>
                        <div style="text-align:center;">
                            <p><a asp-controller="VehicleCatalogue" asp-action="VehicleCopy" asp-route-vehicleCopyId=@vehiclecopy.Id class="btn btn-primary btn-sm" style="background-color:brown; border-color:brown;">Rent a Vehicle Copy </a></p>
                        </div>
                    </div>

                </div>
                </div>
                }
            </div>
    </div>
</div>






